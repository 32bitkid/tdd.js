!function(n){"use strict";var t,e,i,r,o,u,f=function(n){var e=[],i=function(){throw new u("Implementation not defined"+(n?" for: '"+n+"'":"!"))},o=function(){i()};return o.describe=function(n){return n.call(o,o),o},o.given=function(n){var r=function(){i()};return r.when=function(){var r=Array.prototype.slice.call(arguments),u=function(){i()};return u.then=function(t){return e.push(function(e){var i=e.apply(n,r);t.call(n,i,r)}),o},u.returns=function(){var i=arguments.length>1?arguments[1]:arguments[0],u=(arguments.length>1?arguments[0]:t)||t;return e.push(function(t){var e=t.apply(n,r);u(e,i)}),o},u},r},o.when=function(){return o.given(void 0).when.apply(void 0,arguments)},o.define=function(t){for(var i,o=[],u=0;u<e.length;u++){i=e[u];try{i.call(void 0,t)}catch(a){o.push(a)}}if(o.length>0){if(c("fail",[n,o]),f.quietDefine)return function(){throw new r(n,o)};throw new r(n,o)}return t},o};u=f.NotImplementedException=function(n){this.message=n},i=f.NotDefinedException=function(n){this.message=n},r=f.DefinitionNotValidException=function(n,t){this.message="Invalid Implementation: "+n,this.failures=t},o=f.AssertionException=function(n){this.message=n},t=e=function(n,t,e){if(n!==t)throw new o(e||n+" !== "+t)},f.setDefaultAssert=function(n){t=n||e},f.quietDefine=!1;var c=function(){var n={};return f.on=function(t,e,i){var r=n[t]||(n[t]=[]);r.push({cb:e,ctx:i})},f.off=function(t,e){var i=n[t];if(i){if(!e)return void(eventCache[t]=[]);for(var r=i.length-1;r>=0&&i[r].cb!==e;r--);-1!==r&&i.splice(r,1)}},function(t,e){var i=n[t];if(i)for(var r=0;r<i.length;r++){var o=i[r];o.cb.apply(o.ctx,e)}}}();"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=f),exports.tdf=f):n.tdf=f}(this);